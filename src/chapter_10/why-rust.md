# Why Rust



## 目录

- 100 s 介绍 Rust
-  Rust 特色概要
- 我为什么看好 Rust
  - 个人对技术的追求
  - 时代发展需求
- Rust 未来展望



## 100 s 介绍 Rust

[视频： 【中文】100秒了解Rust](https://www.bilibili.com/video/BV1PQ4y1q7Zm)

## Rust  特色概要

Rust 是一门内存安全的语言，在满足高性能的情况下，保证内存安全和并发安全。并且拥有简洁的抽象表达能力，生产效率也非常高。

2009年由 Mozilla 正式立项，2015年正式发布 1.0版本，连续 六年 获得 StackOverflow 的最受欢迎语言榜首。

**为什么 Rust 如此与众不同呢？**

像传统的 C/Cpp 语言，需要手工管理内存。而 Go 或 Java 之类的语言，是通过垃圾回收管理内存。

这两种方式各有优缺点。

前者的控制力虽然比较强，但因为它完全依赖于开发者，而人类自身有难以克服的弱点，处理太复杂的项目就可能出错，这是难以避免的。即便有静态分析工具检查问题，那也只是对结果的审查，无法对开发的过程进行审查。

后者则是依赖垃圾回收算法，不仅仅是性能方面有世界暂停的问题，在内存管理上也不如前者精致，而且开发者无法对内存管理进行精细控制。

所以我们在实现系统的时候，只能去选择不同的语言。上层应用为了开发效率，只能选择 Java 之类的语言，而牺牲性能。 底层基础设施，为了性能，只能选择 C/Cpp 而牺牲安全性。

而 Rust 语言则走了一条新路。

Rust 在内存管理方面 借鉴了  C/ Cpp / CyClone 的优点，在工程性、正确性、健壮性方面则借鉴了 OCaml/  Haskell 函数式语言。在编码风格上，也借鉴了 面向对象语言。

虽然借鉴了这么多语言的特性，但是 Rust 语言并非拿来主义，而是将这些语言特性 融合到类型系统中。

第一，是为了方便编译器做静态分析，在编译时可以对内存安全、并发安全做检查。

第二，提供了所有权语义模型，供开发者来掌握。

通过学习和构建所有权语义心智模型，开发者和 编译器达成对内存安全管理的一致性，否则编译就不会通过。 

正是因为这样的设计，才能迫使开发者在开发的过程中，明确地去思考自己正在做什么。过程比结果更重要。

 Rust 还提供了一流的包管理工具，Cargo。 Cargo 不仅仅是包管理工具，它更是 Rust 开发的工作流工具。

你可以用它管理你的依赖，构建编译项目，编写插件对代码进行静态分析，比如 rustfmt 和 clippy 这种工具，通过 rust编译器暴露的 API，来帮助对代码自动格式化，检查 Rust 代码中的“坏味道”。

Rust 天生也拥抱开源社区，社区就是语言的一部分。Rust 开源社区是当前 开源领域学习的一个典范。

今年  Google 、华为、 微软、 AWS、 mozilla、 facebook 共同成立了Rust 基金会，致力于 Rust 语言在全球范围内的广泛使用。  

Rust 语言和社区还有很多值得你亲自探索的地方，我在这里就不再多说了。

## 我为什么看好 Rust 语言

这要从两个维度来说了。

- 个人对技术的追求
- 时代发展需求

### 个人对技术的追求

对我个人而言，我是期望有一门语言，它是通用的，可以应用于很多领域，而不是仅仅局限于擅长某类技术栈或某个领域，并且它是现代化的语言，从设计哲学、 学术应用到工具链，都是现代化且实用的。

这个期望的出发点在于，作为一名程序员，实在不想把精力放到学习语言上面。我只想要一门通用的语言。

虽然说学习语言对程序员来说，可以算是职业技能了。但实际上，你看到大部分程序员是按语言分阵营的，语言的转换就是思维的转换，临时学了可以用，但要精通一门语言，是需要投入精力的。

只需要掌握一门 Rust  语言，程序员就可以随时投入到他感兴趣的领域中，他的学习成本就只剩下了领域知识。

学习 Rust ，让我实现了这个愿望。 

我在用 Rust 之前，被局限在 Web 应用开发这个领域，因为我掌握的语言只能应用于这个领域。

掌握 Rust 语言之后，对以前没有接触的领域，我也变得更加主动了，数据库、 操作系统、 云计算、Serverless、 嵌入式领域、机器学习，我都可以切入了，而我只需要专注于领域知识的学习即可。

当然，我并不是说你只有掌握 Rust 语言才能这样，我的意思是，掌握 Rust 语言让我多了更多的主动性去突破自己的舒适区而切入其他领域。

也许你也可以跟我一样，如果你热爱技术。

### 时代发展需求

我主要从三个维度看待这个事情：

1. 安全和性能是当下及未来的时代刚需
2. 摩尔定律失效的情况下，只能通过增加核心数量来进行半导体工艺改革
3. 程序员的整体水平和格局将会被提升



当今时代正在经历变革。

软件定义世界的时代正在来临。软件离我们的生活越来越近，对我们的影响也越来越直接，比如自动驾驶、智慧城市。

软件的安全性，变得至关重要。 微软安全应急响应中心统计 2004年到 2018年间修复的所有安全问题，大约有 70% 是内存安全问题。

到了当下，内存安全不仅仅是一个技术问题了，它也是一个社会问题。

内存安全不仅仅是会产生有缺陷的软件，它可能会破坏人们赖以谋生的服务，危害人们的经济和生命安全。也会剥夺我们的更多隐私。

软件应该以更好的方式被构建。

这也是当下众多互联网巨头公司达成的共识。而 Rust 语言 被认为是解决内存安全问题的首选语言。

Google 的 安卓、 Fushcia OS ，都使用 Rust 语言。 Facebook 说，“基本上我们在后端所做的所有事情都是用 Rust 实现的”。 AWS 在多种服务网络栈里使用 Rust，包括 EC2/ S3、 CloudFront ，虚拟化系统 Firecraker，容器操作系统 bottlerokcet 等。

Rust for Linux 团队正在致力于 Rust 和 linux内核更好地协同工作。微软也在用 Rust 重写 Windows 代码库中的底层系统组件。

你可以看到 Rust 正在 “氧（改）化（变）”这个世界。



除了安全性的考虑之外，当今技术变革也在受到经济制约。

半导体工艺改革，现在摩尔定律已经失效。而莱特定律正在起作用。

> 莱特定律就是指某种产品的累计产量每增加一倍，成本就会下降一个恒定的百分比。这一规律，在汽车领域从 1900 年就一直在遵循了，产量每增加一倍，成本价格就会下降 15% 。

对半导体工艺改革而言，莱特定律预示着 晶体管累计产量越多，成本就会下降一个恒定的百分比。

你的电脑上会有一堆隐藏的 CPU 核心，并且可能会越来越多。

你可以看一下苹果最近发布的新 m1 pro 用到的 M1 Max 芯片，使用的 5nm 工艺，这意味着晶体管的密度是 570亿级个，CPU 核心有八个大核两个小核，神经引擎核心是16个， GPU 核心达到 32 个之多。并且成本确实相对降低了一定比例。

这就是来自莱特定律的礼物。

当这些 CPU 充斥到更多的角落时，也就意味着那里有更多计算单元，并且这些计算单元也大部分是资源受限的一类，比如没有太多内存等。

那如果你想为这些计算单元编写程序，你选择什么语言呢？ 

C ？ Cpp？ Java ? Python ? Rust ？

Rust 在这方面更有优势。 性能和安全双保证，并且提供了专门针对嵌入式的核心库，更适合这些资源受限的计算单元。并且也将现代化的语言特性、工程能力、并发能力带入到这些计算单元中。

因为莱特定律，未来将会有更多的地方进行计算，在这些领域， Rust 也会成为首选语言，而 C 语言，它只是存在于软件和硬件的边界上。

以上观点是来自于 Oxide  计算公司 CTO ， Bryan ，在 p99conf上的演讲。我非常认同这个观点。



Rust 的出现，也会影响到 程序员的整体水平和格局提升

Rust 语言的特性，驱使开发者从一开始就要想清楚自己在干什么。

代码一把梭的时代已经过去了。

即便不使用 Rust 的程序员，也会受到其影响。因为 Rust 语言把 软件安全标准和质量带上了一个新的层次。

跟不上这个时代需求的程序员，必将被淘汰。

## Rust 未来展望

Rust 官方在本月发布 Rust 2021 editon 版次，这个版次是对过去三年 Rust 语义版本的一次总结。它代表着 Rust 的成熟。

这以后，Rust 的目标是 广泛使用。 也就是说，在 Rust 基金会的推动下， Rust 官方将致力于推动 Rust 在各个领域的广泛使用。

目前已经看到 Rust 在 数据服务、 云计算、 操作系统、 嵌入式、 游戏、机器学习、 高性能计算、GUI、 影视娱乐等应用潜力。

也涌现出了不少优秀的拥抱开源文化的创业项目。

